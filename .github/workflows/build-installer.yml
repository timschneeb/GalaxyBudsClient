name: Build Windows installer
# Build Windows installer with NSIS
on:
  push:
    paths:
      - '**/*.nsi'
  pull_request:

jobs:
  build-installer:
    runs-on: windows-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install NSIS (makensis) via Chocolatey
        # Windows runners have Chocolatey available and run as admin
        run: choco install nsis -y

      - name: Verify makensis is installed
        run: makensis -VERSION

      - name: Build installer
        # adjust path/to/your-script.nsi to the actual .nsi file in your repo
        env:
          NSIS_SCRIPT: install.nsi
        run: |
          echo Building NSIS installer from "$NSIS_SCRIPT"
          makensis "$NSIS_SCRIPT"

# Notes:
# - Replace NSIS_SCRIPT with the path to your .nsi file in the repo (for example: installer/installer.nsi).
# - If using a self-hosted Windows runner, install NSIS on that machine or add makensis to PATH.
# - If the NSIS script path contains spaces, wrap it in quotes: makensis "path/to/My Installer.nsi"
